<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JautƒÅjumi pƒìc tƒìmƒÅm</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background-color: #ffffff;
            color: #24292f;
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        h1 {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 24px;
            color: #24292f;
        }

        .dropdown-container {
            margin-bottom: 24px;
        }

        label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #24292f;
        }

        select {
            width: 100%;
            padding: 12px 16px;
            font-size: 14px;
            background-color: #f6f8fa;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            color: #24292f;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        select:hover {
            border-color: #0969da;
        }

        select:focus {
            outline: none;
            border-color: #0969da;
            box-shadow: 0 0 0 3px rgba(9, 105, 218, 0.3);
        }

        option {
            background-color: #ffffff;
            color: #24292f;
            padding: 8px;
        }

        .selected-topic {
            margin-top: 24px;
            padding: 16px;
            background-color: #f6f8fa;
            border: 1px solid #d0d7de;
            border-radius: 6px;
        }

        .selected-topic h2 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #0969da;
        }

        .selected-topic p {
            font-size: 14px;
            color: #57606a;
        }

        .loading {
            color: #57606a;
            font-size: 14px;
        }

        .error {
            padding: 16px;
            background-color: #fff1f0;
            border: 1px solid #d73a49;
            border-radius: 6px;
            color: #d73a49;
            font-size: 14px;
        }

        button {
            margin-top: 12px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 600;
            background-color: #2da44e;
            color: #ffffff;
            border: 1px solid rgba(27, 31, 36, 0.15);
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        button:hover {
            background-color: #2c974b;
        }

        button:active {
            background-color: #298e46;
        }

        button:disabled {
            background-color: #94d3a2;
            color: #ffffff;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Izvƒìlies tƒìmu</h1>
        
        <div class="dropdown-container">
            <select id="topics" disabled>
                <option value="">IelƒÅdƒì tƒìmas...</option>
            </select>
        </div>

        <div id="selected-info" class="selected-topic" style="display: none;">
            <h2>IzvƒìlƒìtƒÅ tƒìma</h2>
            <p id="selected-text"></p>
        </div>

        <div id="question-info" class="selected-topic" style="display: none;">
            <h2>JautƒÅjums</h2>
            <p id="question-text"></p>
            <button id="next-question-btn" onclick="loadNextQuestion()">NƒÅkamais jautƒÅjums</button>
        </div>
    </div>

    <script>
        const topicsDropdown = document.getElementById('topics');
        const selectedInfo = document.getElementById('selected-info');
        const selectedText = document.getElementById('selected-text');
        const questionInfo = document.getElementById('question-info');
        const questionText = document.getElementById('question-text');
        const nextQuestionBtn = document.getElementById('next-question-btn');

        let currentTopic = '';
        let currentQuestions = [];

        // Fetch topics from the text file
        async function loadTopics() {
            try {
                const response = await fetch('topics.txt');
                if (!response.ok) {
                    throw new Error('Failed to load topics');
                }
                
                const text = await response.text();
                const topics = text.split('\n').filter(line => line.trim() !== '');
                
                // Clear the dropdown
                topicsDropdown.innerHTML = '<option value="">-- Izvƒìlies tƒìmu --</option>';
                
                // Add topics to dropdown
                topics.forEach(topic => {
                    const option = document.createElement('option');
                    option.value = topic.trim();
                    option.textContent = topic.trim();
                    topicsDropdown.appendChild(option);
                });
                
                // Enable the dropdown
                topicsDropdown.disabled = false;
                
            } catch (error) {
                console.error('Error loading topics:', error);
                topicsDropdown.innerHTML = '<option value="">Kƒº≈´da ielƒÅdƒìjot tƒìmas</option>';
                
                const errorDiv = document.createElement('div');
                errorDiv.className = 'error';
                errorDiv.textContent = 'NeizdevƒÅs ielƒÅdƒìt tƒìmas. PƒÅrliecinies, ka topics.txt atrodas tajƒÅ pa≈°ƒÅ direktorijƒÅ.';
                document.querySelector('.container').appendChild(errorDiv);
            }
        }

        // Load questions for the selected topic
        async function loadQuestion(topicName) {
            try {
                currentTopic = topicName;
                
                // Get first 2 characters of the topic name
                const fileName = topicName.substring(0, 2) + '.txt';
                
                questionText.textContent = 'IelƒÅdƒì jautƒÅjumu...';
                questionInfo.style.display = 'block';
                nextQuestionBtn.disabled = true;
                
                const response = await fetch(fileName);
                if (!response.ok) {
                    throw new Error(`Failed to load questions from ${fileName}`);
                }
                
                const text = await response.text();
                currentQuestions = text.split('\n').filter(line => line.trim() !== '');
                
                if (currentQuestions.length === 0) {
                    throw new Error('FailƒÅ nav atrasti jautƒÅjumi');
                }
                
                // Display a random question
                displayRandomQuestion();
                nextQuestionBtn.disabled = false;
                
            } catch (error) {
                console.error('Error loading questions:', error);
                questionText.textContent = `Kƒº≈´da: NeizdevƒÅs ielƒÅdƒìt jautƒÅjumus. PƒÅrliecinies, ka fails eksistƒì (meklƒì pirmie 2 simboli + .txt).`;
                questionText.style.color = '#f85149';
                nextQuestionBtn.disabled = true;
            }
        }

        // Display a random question from the current questions array
        function displayRandomQuestion() {
            if (currentQuestions.length === 0) return;
            
            const randomIndex = Math.floor(Math.random() * currentQuestions.length);
            const randomQuestion = currentQuestions[randomIndex].trim();
            
            questionText.textContent = randomQuestion;
            questionText.style.color = '#24292f';
        }

        // Load next random question (called by button)
        function loadNextQuestion() {
            displayRandomQuestion();
        }

        // Handle topic selection
        topicsDropdown.addEventListener('change', function() {
            const selectedTopic = this.value;
            
            if (selectedTopic) {
                selectedInfo.style.display = 'block';
                selectedText.textContent = selectedTopic;
                
                // Load a random question from the corresponding file
                loadQuestion(selectedTopic);
            } else {
                selectedInfo.style.display = 'none';
                questionInfo.style.display = 'none';
            }
        });

        // Load topics when page loads
        loadTopics();
    </script>
</body>
</html>